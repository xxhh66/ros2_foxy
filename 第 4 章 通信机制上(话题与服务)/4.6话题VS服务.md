# [4.6 话题服务对比](https://fishros.com/d2lros2foxy/#/chapt4/4.12话题VS服务?id=_46-话题服务对比)

学完了话题和服务两种通信方式，我们来做个小对比，其实大家在学习的过程中也能感受到两者的区别之处。

## [1.话题](https://fishros.com/d2lros2foxy/#/chapt4/4.12话题VS服务?id=_1话题)

话题是单向的，而且不需要等待服务端上线，直接发就行，数据的实时性比较高。

频率高，实时性强的传感器数据的传递一般使用话题实现。

<font color=red> Topic 是「广播状态」</font>

**设计哲学：**

> *我不关心谁在听，但我会持续说。*

特点：

- 发布者不知道订阅者是谁
- 订阅者随时加入 / 离开
- 没有“成功 / 失败”的概念

📌 **核心关键词**：
 **状态、数据流、广播**

## [2.服务](https://fishros.com/d2lros2foxy/#/chapt4/4.12话题VS服务?id=_2服务)

服务是双向的，客户端发送请求后，服务端有响应，可以得知服务端的处理结果。

频率较低，强调服务特性和反馈的场景一般使用服务实现。

<font color=red> Service 是「一次交易」</font>

**设计哲学：**

> *我向你要一个结果，你必须回答我。*

特点：

- 明确的请求方和服务方
- 有“成功 / 失败”语义
- 适合确定性的操作

📌 **核心关键词**：
 **命令、查询、事务**

## [3.总结](https://fishros.com/d2lros2foxy/#/chapt4/4.12话题VS服务?id=_3总结)

截至目前，相信你已经掌握了ROS2中的话题和服务通信机制，这两种通信机制是ROS2中通信机制的精华部分，下一章节的参数和动作两种通信方式其实就是基于话题和服务实现的。

保持好奇心，让我们继续往下学习吧。

| 通信类型              | 创建方式                |
| --------------------- | ----------------------- |
| **Topic（发布者）**   | `create_publisher()`    |
| **Topic（订阅者）**   | `create_subscription()` |
| **Service（服务端）** | `create_service()`      |
| **Service（客户端）** | `create_client()`       |

+ **Topic**

| 项目     | 说明                    |
| -------- | ----------------------- |
| 通信模型 | 发布 / 订阅             |
| 发送端   | Publisher               |
| 接收端   | Subscriber              |
| 创建发送 | `create_publisher()`    |
| 创建接收 | `create_subscription()` |
| 特点     | 异步、无返回、多对多    |

+ **Service**

| 项目     | 说明               |
| -------- | ------------------ |
| 通信模型 | 请求 / 响应        |
| 提供端   | Service Server     |
| 请求端   | Service Client     |
| 创建服务 | `create_service()` |
| 发送请求 | `create_client()`  |
| 特点     | 同步语义、有返回   |

> 一句话先给结论（设计时用）

> **连续数据、状态广播 → 用 Topic
>  明确请求、必须有结果 → 用 Service**

## 4. ROS2 Topic vs Service（核心对比表）

| 对比维度     | **Topic**       | **Service**  |
| ------------ | --------------- | ------------ |
| 通信模型     | 发布 / 订阅     | 请求 / 响应  |
| 是否异步     | ✅ 是            | ❌ 逻辑上同步 |
| 是否有返回值 | ❌ 无            | ✅ 有         |
| 是否阻塞     | ❌ 不阻塞        | ⚠️ 会等待响应 |
| 通信方向     | 单向            | 双向         |
| 多对多       | ✅ 支持          | ❌ 一对一     |
| 数据频率     | 高频 / 连续     | 低频 / 偶发  |
| 是否持久     | 可通过 QoS      | 不持久       |
| 典型用途     | 状态流 / 传感器 | 命令 / 查询  |

### Topic 的典型场景

| 场景       | 为什么用 Topic |
| ---------- | -------------- |
| 摄像头图像 | 高频、连续     |
| 激光雷达   | 数据流         |
| 里程计     | 状态更新       |
| 机器人姿态 | 广播           |
| 日志信息   | 多节点监听     |

```

/camera/image
/odom
/tf
```

### Service 的典型场景

| 场景        | 为什么用 Service |
| ----------- | ---------------- |
| 开关设备    | 必须知道是否成功 |
| 参数查询    | 有明确返回       |
| 借钱 / 交易 | 一次性           |
| 触发动作    | 需要结果         |